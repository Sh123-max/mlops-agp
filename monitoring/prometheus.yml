# prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s
  scrape_timeout: 10s

rule_files:
  - "/etc/prometheus/alert_rules.yml"

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'flask_apps'
    # Prometheus will scrape the /metrics endpoint on these targets
    metrics_path: '/metrics'
    static_configs:
      - targets: ['host.docker.internal:5000', 'host.docker.internal:5005']
      # If host.docker.internal is not available on your Linux host, replace the
      # above targets with the host IP (e.g. '192.168.1.10:5000') OR run Prometheus
      # with network_mode: "host" so it can reach localhost on the host.

  - job_name: 'pushgateway'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['pushgateway:9091']
